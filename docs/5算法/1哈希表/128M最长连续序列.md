# 128M 最长连续序列

## 解题思路

### 思路一

哈希

先用哈希存下数组，值为 1，降低查询复杂度

然后遍历数组，遇到数就一直查找左右+1，查找时标注已经查找的数值为 2，已经查找过就跳过

最后取当前查找长度和 max 的最大值 Math.max(max, left + right - 1)

剪枝通过如果第一个查找已经超过一半数量，那么最大值已经出来了

### 代码

```js
/**
 * @param {number[]} nums
 * @return {number}
 */
var longestConsecutive = function (nums) {
  const hash = {};
  let max = 0;

  for (let i = 0; i < nums.length; i++) {
    hash[nums[i]] = 1;
  }

  for (let i = 0; i < nums.length; i++) {
    let right = 1;
    let left = 1;

    // 右找连续的数，找过的跳过
    if (hash[nums[i] + right] === 1) {
      while (hash[nums[i] + right]) {
        right++;
        hash[nums[i] + right] += right;
      }
    }

    // 左找连续的数，找过的跳过
    if (hash[nums[i] - left] === 1) {
      while (hash[nums[i] - left]) {
        left++;
        hash[nums[i] + right] += left;
      }
    }

    max = Math.max(max, left + right - 1);

    // 剪枝，如果第一个查找已经超过一半数量，那么最大值已经出来了
    if (max > Math.floor(nums.length / 2)) {
      return max;
    }
  }

  return max;
};
```
