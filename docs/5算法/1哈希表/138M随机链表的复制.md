# 138M 随机链表的复制

## 解题思路

### 思路一

哈希

遍历第一遍使用 map 存旧 node 和新 node 的映射，同时做出新 node

然后遍历第二遍，先用 map 拿当前新 node，然后还是用 map 拿到旧 node 的 next 和 random 对应的新 node

### 代码

```js
/**
 * // Definition for a _Node.
 * function _Node(val, next, random) {
 *    this.val = val;
 *    this.next = next;
 *    this.random = random;
 * };
 */

/**
 * @param {_Node} head
 * @return {_Node}
 */
var copyRandomList = function (head) {
  const old2new = new Map();
  let index = 0;
  let oldHead = head;

  while (oldHead) {
    old2new.set(oldHead, new _Node(oldHead.val, null, null));
    oldHead = oldHead.next;
    index++;
  }

  oldHead = head;

  while (oldHead) {
    const newNode = old2new.get(oldHead);

    if (oldHead.next) {
      newNode.next = old2new.get(oldHead.next);
    }

    if (oldHead.random) {
      newNode.random = old2new.get(oldHead.random);
    }

    oldHead = oldHead.next;
  }

  return old2new.get(head);
};
```
