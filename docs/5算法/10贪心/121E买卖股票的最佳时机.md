# 121E 买卖股票的最佳时机

## 解题思路

### 思路一

动态规划

首先根据 prices 数组推出每天涨跌值，例如

[-6, +4, -2, +3, -2]

题目内我们是上帝视角

限制只能买一次

所以第一次涨前抄底，然后有利润就拿住，如果没利润就归零重新抄

初始化 dp 就是 dp[0]=0

方程就是 dp[i] = Math.max(dp[i - 1] + price, 0);

### 代码

```js
/**
 * @param {number[]} prices
 * @return {number}
 */
var maxProfit = function (prices) {
  const dp = new Array(prices.length).fill(0);

  dp[0] = 0;

  for (let i = 1; i < prices.length; i++) {
    // 每天涨跌价格
    const price = prices[i] - prices[i - 1];

    // 有利润就拿住，没利润就清零，下一个涨前再买入
    dp[i] = Math.max(dp[i - 1] + price, 0);
  }

  return Math.max(...dp);
};
```

### 思路二

贪心

之前的思路没必要用动态规划了

首先根据 prices 数组推出每天涨跌值，例如

[-6, +4, -2, +3, -2]

题目内我们是上帝视角

限制只能买一次

所以第一次涨前抄底，然后有利润就拿住，如果没利润就归零重新抄

记录最大sum的波段为max

遍历就行

### 代码

```js
/**
 * @param {number[]} prices
 * @return {number}
 */
var maxProfit = function (prices) {
  const diff = prices.slice(1).map((item, index) => item - prices[index]);
  let sum = 0;
  let max = 0;

  for (let i = 0; i < diff.length; i++) {
    sum += diff[i];

    if (sum > max) {
      max = sum;
    }

    if (sum < 0) {
      sum = 0;
    }
  }

  return max;
};
```
