# 211M 添加与搜索单词

## 解题思路

### 思路一

先写 Node 构造函数，需要应该 children 对象或者 Map，还有 isLeaf 标记叶子节点

addWord 就都是按层遍历 char，通过 Map 来去下一层

search 不一样，因为 search 需要匹配'.'，所以需要使用深度优先搜索递归，先封装 search 递归函数，传入 node 和 word 作为递归遍历，其他先和按层遍历 char 一样，但是当 char 是'.'时，需要对每个 children node 调用 search，有一个找到就是 true

### 代码

```js
function Node() {
  this.children = new Map();
  this.isLeaf = false;
}

var WordDictionary = function () {
  this.root = new Node();
};

/**
 * @param {string} word
 * @return {void}
 */
WordDictionary.prototype.addWord = function (word) {
  let cur = this.root;

  for (let i = 0; i < word.length; i++) {
    const char = word[i];

    if (!cur.children.has(char)) {
      cur.children.set(char, new Node());
    }

    cur = cur.children.get(char);
  }

  cur.isLeaf = true;
};

/**
 * @param {string} word
 * @return {boolean}
 */
WordDictionary.prototype.search = function (word) {
  const search = (node, word) => {
    let cur = node;

    for (let i = 0; i < word.length; i++) {
      const char = word[i];

      if (char === ".") {
        for (const node of cur.children.values()) {
          if (search(node, word.slice(i + 1))) {
            return true;
          }
        }
      }

      if (!cur.children.has(char)) {
        return false;
      }

      cur = cur.children.get(char);
    }

    return cur.isLeaf;
  };

  return search(this.root, word);
};

/**
 * Your WordDictionary object will be instantiated and called as such:
 * var obj = new WordDictionary()
 * obj.addWord(word)
 * var param_2 = obj.search(word)
 */
```
